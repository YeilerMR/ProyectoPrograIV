<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html xmls:th="http://thymeleaf.org">
    <head>
        <title>Formulario de Ofertas</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript" th:src="@{/js/scriptOfertas.js}"></script>

        <!-- NUEVO AGREGADO PARA EL DISENO -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
        <link rel="stylesheet" th:href="@{/main.css}" />
        <link rel="stylesheet" th:href="@{/css/modal.css}" />
        <script src="https://kit.fontawesome.com/a2dd6045c4.js"></script>
    </head>
    <body>
        <div class="wrapper">
            <aside>
                <button class="close-menu" id="close-menu">
                    <i class="bi bi-x"></i>
                </button>
                <header>
                    <img th:src="@{/img/logo.png}" alt="Logo">
                </header>
                <nav>
                    <ul class="menu">
                        <li>
                            <button id="todos" class="boton-menu boton-categoria" onclick="window.location.href = '/index'"><i class="bi bi-hand-index-thumb"></i> Inicio</button>
                        </li>
                        <li>
                            <button class="boton-menu boton-categoria"><i class="bi bi-hand-index-thumb"></i>
                                Apartados</button>
                        </li>
                        <li>
                            <button class="boton-menu boton-categoria"><i class="bi bi-hand-index-thumb"></i>
                                Empleados</button>
                        </li>
                        <li>
                            <button class="boton-menu boton-categoria"><i class="bi bi-hand-index-thumb"></i>
                                Proveedores</button>
                        </li>
                        <li>
                            <button id="camisetas" class="boton-menu boton-categoria" onclick="window.location.href = '/ordenes_compra/listar'"><i class="bi bi-hand-index-thumb"></i> Ordenes de Compra</button>
                        </li>
                        <li>
                            <button class="boton-menu boton-categoria"><i
                                    class="bi bi-hand-index-thumb"></i>
                                Clientes </button>
                        </li>
                        <li>
                            <button class="boton-menu boton-categoria" th:onclick="window.location.href='/envios/listar'">
                                <i class="bi bi-hand-index-thumb"></i> Envíos
                            </button>
                        </li>
                        <li>
                            <button class="boton-menu boton-categoria" th:onclick="window.location.href='/productos/listar'">
                                <i class="bi bi-hand-index-thumb"></i> Productos
                            </button>
                        </li>
                        <li>
                            <button class="boton-menu boton-categoria active" th:onclick="window.location.href='/ofertas/listar'">
                                <i class="bi bi-hand-index-thumb-fill"></i> Ofertas
                            </button>
                        </li>
                        <li>
                            <button id="pantalones" class="boton-menu boton-categoria" onclick="window.location.href = '/facturas/listar'"><i class="bi bi-hand-index-thumb"></i> Facturas</button>
                        </li>
                    </ul>
                </nav>
                <footer>
                    <p class="texto-footer">© Proyecto Progra 4</p>
                </footer>
            </aside>
            <main>
                <h1>Lista de Ofertas</h1>
                <!-- PARTE DE BÚSQUEDA DE ALGÚN CLIENTE MEDIANTE CÉDULA -->
                <div class="table_header">
                    <div class="input-container">
                        <p>Productos</p>
                        <form class="form_producto" th:action="@{/ofertas/buscar}" method="get">
                            <input name="producto" placeholder="Codigo de la oferta" required>
                            <button class="search_producto" type="submit">Buscar</button>
                        </form>
                        <button id="add_new" class="add_new">Crear nuevo</button>
                    </div>
                </div>

                <table class="contenedor-productos">
                    <tr>
                        <th>Codigo</th>
                        <th>Codigo producto</th>
                        <th>Tipo de oferta</th>
                        <th>Descuento</th>
                        <th>Fecha inicio</th>
                        <th>Fecha final</th>
                        <th>Estado</th>
                        <th>Accion</th>
                    </tr>
                    <tr th:each="oferta: ${ofertas}">
                        <td th:text="${oferta.codigoOferta}"></td>
                        <td th:text="${oferta.codigoProducto}"></td>
                        <td th:text="${oferta.tipoOferta}"></td>
                        <td th:text="${oferta.descuentoOferta}"></td>
                        <td th:text="${oferta.fechaInicio}"></td>
                        <td th:text="${oferta.fechaFin}"></td>
                        <td th:text="${oferta.estado}"></td>

                        <td>
                            <!--form action="@{/ofertas/eliminar/{codigo}(codigo=${oferta.codigoOferta})}" method="post" onsubmit="return confirm('¿Estás seguro de querer eliminar esta oferta?')">
                                <input type="hidden" name="_method" value="delete" />
                                <button type="submit" class="producto-eliminar">Eliminar</button>
                            </form-->
                            <form action="/ofertas/eliminarOferta" method="get" onsubmit="return confirm('¿Estás seguro de querer eliminar esta oferta?')">
                                <input type="hidden" name="codigoOferta" th:value="${oferta.codigoOferta}" />
                                <button type="submit" class="producto-eliminar">Eliminar</button>
                            </form>
                            ----------
                            <button class="producto-editar" style="display: inline;">Editar</button>
                            <div class="modal">
                                <div class="modal-content">
                                    <span class="close">&times;</span>
                                    <div class="container">
                                        <form th:action="@{/ofertas/actualizar}" method="post" onsubmit="return confirm('¿Estas seguro de querer actualizar este producto?')">

                                            <input type="hidden" name="codigoOferta" th:value="${oferta.codigoOferta}">

                                            <label for="nombre">Codigo del producto</label>
                                            <select name="codigoProducto">
                                                <option value="">Selecciona un código de producto</option>
                                                <option th:each=" producto : ${productos}" th:value="${producto.codigo}" th:text="${producto.codigo}"></option>
                                            </select>

                                            <label>Tipo de Oferta:</label>
                                            <input type="text" name="tipoOferta" placeholder="Tipos de ofertas" required th:value="${oferta.tipoOferta}">

                                            <label>Descuento en %:</label>
                                            <input type="number" name="descuentoOferta" placeholder="descuento %" required th:value="${oferta.descuentoOferta}">

                                            <!-- Ajustar validacion de fecha -->
                                            <label>Fecha Inicio:</label>
                                            <input type="date" name="fechaInicio">

                                            <!-- Ajustar validacion de fecha -->
                                            <label>Fecha Final:</label>
                                            <input type="date" name="fechaFin">

                                            <label>Estado:</label>
                                            <select name="estado">
                                                <option value="true" >Activo</option>
                                                <option value="false">Inactivo</option>
                                            </select>

                                            <input type="submit" value="Crear">

                                        </form>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>


            </main>
            <div id="modal" class="modal">
                <div class="modal-content">
                    <span id="closeModalNuevo" class="close">&times;</span>
                    <div class="container">
                        <form th:action="@{/ofertas/guardar}" method="get" onsubmit="return confirm('¿Estas seguro de querer guardar esta oferta?')">

                            <label for="nombre">Código de la oferta</label>
                            <input type="text" name="codigoOferta" class="form-control" placeholder="Código de la oferta" required>

                            <label for="nombre">Codigo del producto</label>
                            <select name="codigoProducto">
                                <option value="">Selecciona un código de producto</option>
                                <option th:each=" producto : ${productos}" th:value="${producto.codigo}" th:text="${producto.codigo}"></option>
                            </select>

                            <label>Tipo de Oferta:</label>
                            <input type="text" name="tipoOferta" placeholder="Tipos de ofertas" required><!-- comment -->

                            <label>Descuento en %:</label>
                            <input type="number" name="descuentoOferta" placeholder="descuento %" required><!-- -->

                            <label>Fecha Inicio:</label>
                            <input type="date" name="fechaInicio"><!--  -->

                            <label>Fecha Final:</label>
                            <input type="date" name="fechaFin">  

                            <label>Estado:</label>
                            <select name="estado">
                                <option value="true" >Activo</option>
                                <option value="false">Inactivo</option>
                            </select>

                            <input type="submit" value="Crear">

                        </form>
                    </div>
                </div>
            </div>

        </div>

    </body>
</html>
